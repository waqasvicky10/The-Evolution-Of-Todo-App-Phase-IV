# Generated for Phase IV - Hackathon Todo
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Chart.Name }}-secrets
type: Opaque
{{- if or .Values.secrets.databaseUrl .Values.secrets.betterAuthSecret .Values.secrets.openaiApiKey }}
data:
  {{- if .Values.secrets.databaseUrl }}
  databaseUrl: {{ .Values.secrets.databaseUrl | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.betterAuthSecret }}
  betterAuthSecret: {{ .Values.secrets.betterAuthSecret | b64enc | quote }}
  {{- end }}
  {{- if .Values.secrets.openaiApiKey }}
  openaiApiKey: {{ .Values.secrets.openaiApiKey | b64enc | quote }}
  {{- end }}
{{- else }}
stringData:
  # Default empty values - MUST be overridden during installation
  # Use: helm install --set-string secrets.databaseUrl="your-db-url" ...
  databaseUrl: "postgresql://user:pass@localhost/todoapp"
  betterAuthSecret: "change-me-in-production"
  openaiApiKey: "sk-dummy-mock-mode-key"
{{- end }}
